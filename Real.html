<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bootstrap Carousel Example</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <style>
      .carousel-item {
        transition: transform 0.1s ease-in-out;
        height: 500px; /* Set custom height */
      }
      /* Custom width for the carousel */
      #myCarousel {
        width: 35%; /* Adjust this value to change the width */
        margin: 0 auto; /* Center the carousel */
      }
      /* Ensure images take up full height of the carousel */
      #myCarousel img {
        height: 100%;
        object-fit: cover; /* Ensures the image covers the container without stretching */
      }

      #pauseButton {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }

      .carousel-item.active div{
        position: absolute;
        top: 50%;
        left: 15%;
        font-size: 80px;
        transition: top 0.5s ease-in-out, left 0.5s ease-in-out, font-size 0.5s ease-in-out;
      }

      @media only screen and (max-width: 768px) {
        #myCarousel {
          width: 100%; /* Adjust this value to change the width */
          margin: 0 auto; /* Center the carousel */
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Fantasy</a>
        <span>Target: <span id="target">20</span></span>
        <div><span id="runs">5</span> Vale From <span id="balls">1</span> Geek</div>
      </div>
    </nav>

    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active" id="six">
          <img
            class="d-block w-100"
            src="img/slide-img1.jpg"
            alt="First slide"
          />
          <div class="">6</div>
        </div>
        <div class="carousel-item" id="four">
          <img
            class="d-block w-100"
            src="img/slide-img2.jpg"
            alt="Second slide"
          />
          <div class="">4</div>
        </div>
        <div class="carousel-item" id="one">
          <img
            class="d-block w-100"
            src="img/slide-img3.jpg"
            alt="Third slide"
          />
          <div class="">1</div>
        </div>
      </div>
    </div>

    <!-- Pause Button -->
    <button id="pauseButton" class="btn btn-dark mt-3">
      Hold Button & Ply Music
    </button>

    <audio id="background_music" src="./music/de_ghuma_ke.mp3"></audio>

    <audio
      id="six0"
      src="./music/Hitting Six _ Cricket _ Commentary _ Sound.mp3"
    ></audio>
    <audio id="four0" src="./music/Ravi Shastri Commentary.mp3"></audio>
    <audio id="one0" src="./music/crowd_the_hill_language-69994.mp3"></audio>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script>
      const target = 40;
      var runs = target;
      var balls = 12;

      const requiredRuns = document.getElementById('runs');
      requiredRuns.textContent = runs;
      const remainingBalls = document.getElementById('balls');
      remainingBalls.textContent = balls;
      const targetRun = document.getElementById('target');
      targetRun.textContent = target;

      // Initialize the carousel with interval of 100 milliseconds
      $("#myCarousel").carousel({
        interval: 0.1, // 0.1 second
      });

      function calculateScore(number) {
        runs = runs-number;
        balls = balls-1;
        const requiredRuns = document.getElementById('runs');
        requiredRuns.textContent = runs;
        const remainingBalls = document.getElementById('balls');
        remainingBalls.textContent = balls;

        if(runs<=0 && balls>=0){
          // alert("You Won");
          $("#pauseButton").prop("disabled", true);
          // Remove event listeners
          $("#pauseButton").off("click");
          $("#pauseButton").off("touchstart");

        }
        else if(runs===1 && balls===0){
          // alert("Match Tied");
          $("#pauseButton").prop("disabled", true);
          // Remove event listeners
          $("#pauseButton").off("click");
          $("#pauseButton").off("touchstart");

        }
        else if(runs>0 && balls<=0){
          $("#pauseButton").prop("disabled", true);
          // Remove event listeners
          $("#pauseButton").off("click");
          $("#pauseButton").off("touchstart");
          $("#pauseButton").off("touchend");

        }
      }

      var backgroundAudio = document.getElementById("background_music");
      backgroundAudio.play();

      function playMusic() {
        var activeSlide = document.querySelector(".carousel-item.active");
        var Id = activeSlide.id;
        console.log(Id);
        console.log(activeSlide);
        var audio = document.getElementById(Id + "0");
        audio.play();
      }

      function pauseCarouselAndPlayMusic() {
        $("#myCarousel").carousel("pause");
        setTimeout(function () {
          var activeSlide = document.querySelector(".carousel-item.active");
          var Id = activeSlide.id;
          console.log("Active slide ID after pause:", Id);
          playMusic();
          var firstDiv = activeSlide.querySelector("div");
          var content = firstDiv.textContent || firstDiv.innerText;
          var number = Number(content); 
          calculateScore(number);
        }, 200); // Slight delay to ensure the active slide is updated
      }

      // Function to resume the carousel and pause music
      function resumeCarouselAndPauseMusic() {
          $("#myCarousel").carousel("cycle");

        var activeSlide = document.querySelector(".carousel-item.active");
        var Id = activeSlide.id;
        console.log("Active slide ID for pausing music:", Id);
        var audio = document.getElementById(Id + "0");
        if (audio) {
          audio.pause();
          audio.currentTime = 0;
        } else {
          console.error("No audio element found for ID:", Id + "0");
        }
      }

      // Add event listeners to the pause button for holding and releasing
      $("#pauseButton").on("touchstart", function () {
          pauseCarouselAndPlayMusic(); // Pause the carousel and play music when the button is held down or touched
      });

      $("#pauseButton").on("touchend", function () {
        resumeCarouselAndPauseMusic(); // Resume the carousel and pause music when the button is released or touch ends
      });



    </script>
  </body>
</html>

<!-- Add event listeners to the pause button for holding and releasing
      $("#pauseButton").on("mousedown touchstart", function () {
        pauseCarouselAndPlayMusic(); // Pause the carousel and play music when the button is held down or touched
      });

      $("#pauseButton").on("mouseup touchend", function () {
        resumeCarouselAndPauseMusic(); // Resume the carousel and pause music when the button is released or touch ends
      }); -->